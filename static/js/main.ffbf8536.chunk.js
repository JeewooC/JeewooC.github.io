(this.webpackJsonpviridi=this.webpackJsonpviridi||[]).push([[0],{29:function(e,t,c){},30:function(e,t,c){},32:function(e,t,c){},33:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},49:function(e,t,c){},51:function(e,t,c){"use strict";c.r(t);var n=c(3),s=c.n(n),r=c(16),a=c.n(r),i=(c(29),c(30),c(8)),o=c(2),l=Object(n.createContext)(),j=function(e){var t=Object(n.useState)(null),c=Object(i.a)(t,2),s=c[0],r=c[1];return Object(o.jsx)(l.Provider,{value:{user:[s,r]},children:e.children})},u=(c(32),c(33),c(15)),d=c(11),p=c.n(d),b=c(13),m=b.a.initializeApp({apiKey:"AIzaSyBrE6LUNKCtFgvaLjNKEZTfJlpKofHMlqk",authDomain:"viridi-c4949.firebaseapp.com",projectId:"viridi-c4949",storageBucket:"viridi-c4949.appspot.com",messagingSenderId:"813233171406",appId:"1:813233171406:web:2b02551aff42907ecd199f",measurementId:"G-NTDH7V69M2"}).firestore(),h=b.a.auth(),f=b.a.storage(),O=new b.a.auth.GoogleAuthProvider,g=function(){var e=Object(u.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.signInWithPopup(O).then((function(e){console.log(e.user),t=e.user})).catch((function(e){console.log(e.message)}));case 2:return e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();c(39);function x(){var e=Object(i.a)(Object(n.useContext)(l).user,2),t=(e[0],e[1]),c=function(){var e=Object(u.a)(p.a.mark((function e(){var c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:(c=e.sent)&&t(c),console.log(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.jsx)("div",{className:"signInBtn",onClick:c,children:Object(o.jsx)("p",{children:"Sign In With Google"})})}c(40);function v(e){var t=e.username,c=e.caption;return Object(o.jsx)("div",{className:"comment",children:Object(o.jsxs)("p",{children:[Object(o.jsx)("span",{style:{fontWeight:"500",marginRight:"4px"},children:t}),c]})})}c(41);function N(){var e=Object(i.a)(Object(n.useContext)(l).user,2),t=e[0];e[1];return Object(o.jsxs)("div",{className:"navbar",children:[Object(o.jsxs)("div",{className:"titleBox",children:[Object(o.jsx)("img",{src:"https://svgur.com/i/VVY.svg",alt:"logo",height:"50"}),Object(o.jsx)("p",{className:"title",children:"Viridi"})]}),t?Object(o.jsx)("div",{className:"verticalCenter",children:Object(o.jsx)("img",{src:t.photoURL,className:"profilePhoto"})}):Object(o.jsx)(x,{})]})}c(42);var _=c(22),y=c.n(_);function P(){var e=Object(i.a)(Object(n.useContext)(l).user,2),t=e[0],c=(e[1],Object(n.useState)("")),s=Object(i.a)(c,2),r=s[0],a=s[1],j=Object(n.useState)(null),u=Object(i.a)(j,2),d=u[0],p=u[1],h=Object(n.useState)(0),O=Object(i.a)(h,2),g=O[0],v=O[1];return Object(o.jsx)("div",{className:"createPost",children:t?Object(o.jsxs)("div",{className:"createPost__loggedIn",children:[Object(o.jsx)("p",{children:" Create Post"}),Object(o.jsxs)("div",{className:"createPost__loggedInCenter",children:[Object(o.jsx)("textarea",{className:"createPost__textArea",rows:"3",placeholder:"Enter caption here...",value:r,onChange:function(e){return a(e.target.value)}}),Object(o.jsx)("div",{className:"createPost__imagePreview",children:Object(o.jsx)("img",{id:"image-preview",alt:""})})]}),Object(o.jsxs)("div",{className:"createPost_loggedInBottom",children:[Object(o.jsxs)("div",{className:"createPost__imageUpload",children:[Object(o.jsx)("label",{htmlFor:"fileInput",children:Object(o.jsx)(y.a,{style:{cursor:"pointer"}})}),Object(o.jsx)("input",{id:"fileInput",type:"file",accept:"image/*",onChange:function(e){if(e.target.files[0]){p(e.target.files[0]);var t=URL.createObjectURL(e.target.files[0]),c=document.getElementById("image-preview");c.src=t,c.style.display="block"}}})]}),Object(o.jsx)("button",{className:"createPost__uploadButton",onClick:function(){if(d){var e=function(e){for(var t="",c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=c.length,s=0;s<e;s++)t+=c.charAt(Math.floor(Math.random()*n));return t}(10);f.ref("images/".concat(e,".jpg")).put(d).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);v(t)}),(function(e){console.log(e)}),(function(){f.ref("images").child("".concat(e,".jpg")).getDownloadURL().then((function(e){m.collection("posts").add({timestamp:b.a.firestore.FieldValue.serverTimestamp(),caption:r,username:t.email.replace("@gmail.com",""),photoUrl:e})})),a(""),v(0),p(null)}))}},style:{color:r?"#000":"lightgray'"},children:"Upload ".concat(0!==g?g:"")})]})]}):Object(o.jsxs)("div",{children:[Object(o.jsx)(x,{}),Object(o.jsx)("p",{style:{marginLeft:"12px"},children:" to Post or Comment"})]})})}c(49);function C(e){var t=e.profileUrl,c=(e.id,e.username),s=e.caption,r=e.comments,a=e.photoUrl,j=Object(i.a)(Object(n.useContext)(l).user,2),u=j[0];j[1];return Object(o.jsxs)("div",{className:"post",children:[Object(o.jsxs)("div",{className:"post__header",children:[Object(o.jsx)("div",{className:"post__headerLeft",children:Object(o.jsx)("img",{className:"post__headerprofilePic",src:t})}),Object(o.jsxs)("p",{style:{marginRight:"450px"},children:[c," "]}),u&&u.email.replace("@gmail.com","")==c?Object(o.jsx)("button",{className:"post__delete",children:"Delete"}):Object(o.jsx)(o.Fragment,{})]}),Object(o.jsx)("div",{className:"post__center",children:Object(o.jsx)("img",{className:"post__photoUrl",src:a})}),Object(o.jsx)("div",{className:"post__caption",children:Object(o.jsxs)("p",{children:[Object(o.jsx)("span",{style:{fontWeight:"500",marginRight:"4px"},children:c}),s]})}),r?r.map((function(e){return Object(o.jsx)(v,{username:e.username,caption:e.comment})})):Object(o.jsx)(o.Fragment,{})]})}function I(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),c=t[0],s=t[1];return Object(n.useEffect)((function(){m.collection("posts").onSnapshot((function(e){s(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(o.jsx)("div",{className:"feed",children:c.map((function(e){var t=e.id,c=e.post;return Object(o.jsx)(C,{id:t,profileUrl:c.profileUrl,username:c.username,photoUrl:c.photoUrl,caption:c.caption},t)}))})}function U(){return Object(o.jsxs)("div",{className:"home",children:[Object(o.jsx)(N,{}),Object(o.jsx)(P,{}),Object(o.jsx)(I,{})]})}var w=function(){return Object(o.jsx)(j,{children:Object(o.jsx)("div",{className:"App",children:Object(o.jsx)(U,{})})})},S=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,64)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),r(e),a(e)}))};a.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(w,{})}),document.getElementById("root")),S()}},[[51,1,2]]]);
//# sourceMappingURL=main.ffbf8536.chunk.js.map